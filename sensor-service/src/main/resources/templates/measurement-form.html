<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title>AquaWatch - Nouvelle Mesure</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container mt-4">
    <h2 class="mb-3">Saisie d'une nouvelle mesure de qualité de l'eau</h2>

    <div th:if="${param.success}">
        <div class="alert alert-success">
            Mesure enregistrée avec succès ✅
        </div>
    </div>

    <form th:action="@{/ui/measurements}" th:object="${measurementForm}" method="post" class="card p-3">

        <!-- Station -->
        <div class="mb-3">
            <label class="form-label">Station</label>
            <select class="form-select" th:field="*{stationId}">
                <option value="">-- Choisir une station --</option>
                <option th:each="st : ${stations}"
                        th:value="${st.id}"
                        th:text="${st.name} + ' (' + ${st.code} + ')'">
                </option>
            </select>
            <div class="text-danger" th:if="${#fields.hasErrors('stationId')}"
                 th:errors="*{stationId}"></div>
        </div>

        <!-- pH -->
        <div class="mb-3">
            <label class="form-label">pH</label>
            <input type="number" step="0.01" min="0" max="14"
                   class="form-control" th:field="*{ph}">
            <small class="form-text text-muted">Typiquement entre 6.83 et 7.48 dans ton dataset.</small>
            <div class="text-danger" th:if="${#fields.hasErrors('ph')}"
                 th:errors="*{ph}"></div>
        </div>

        <!-- Température -->
        <div class="mb-3">
            <label class="form-label">Température (°C)</label>
            <input type="number" step="0.1" class="form-control"
                   th:field="*{temperature}">
            <small class="form-text text-muted">Exemple dataset : 20.3 - 23.6 °C.</small>
        </div>

        <!-- Turbidité -->
        <div class="mb-3">
            <label class="form-label">Turbidité (NTU)</label>
            <input type="number" step="0.1" class="form-control"
                   th:field="*{turbidity}">
            <small class="form-text text-muted">Exemple dataset : 3.1 - 5.1 NTU.</small>
        </div>

        <!-- DO -->
        <div class="mb-3">
            <label class="form-label">Dissolved Oxygen (mg/L)</label>
            <input type="number" step="0.1" class="form-control"
                   th:field="*{dissolvedOxygen}">
            <small class="form-text text-muted">Exemple dataset : 6.0 - 9.9 mg/L.</small>
        </div>

        <!-- Conductivité -->
        <div class="mb-3">
            <label class="form-label">Conductivité (µS/cm)</label>
            <input type="number" step="1" class="form-control"
                   th:field="*{conductivity}">
            <small class="form-text text-muted">Exemple dataset : 316 - 370 µS/cm.</small>
        </div>

        <button type="submit" class="btn btn-primary">Enregistrer</button>
    </form>
</div>

</body>
</html>
