@startuml UseCase_SatelliteService
!theme cerulean
skinparam actorStyle awesome
skinparam packageStyle rectangle

title **SATELLITE-SERVICE - Diagramme de Cas d'Utilisation**\nPort: 8082

left to right direction

' ===== ACTEURS =====
actor "Analyste\nTélédétection" as analyst #LightBlue
actor "Système\nIngestion" as ingestion #Orange
actor "Administrateur" as admin #LightGreen
actor "STModel-Service" as stmodelservice #Orchid

' ===== SYSTÈME =====
rectangle "Satellite-Service (8082)" as system #E3F2FD {
    
    ' Gestion des scènes
    package "Gestion des Scènes Satellite" {
        usecase "Consulter toutes\nles scènes" as UC1
        usecase "Consulter une scène\npar ID" as UC2
        usecase "Enregistrer une\nnouvelle scène" as UC3
        usecase "Définir le type\nde satellite" as UC3a
    }
    
    ' Gestion des métriques
    package "Gestion des Métriques" {
        usecase "Créer une métrique\npour une station" as UC4
        usecase "Consulter les dernières\nmétriques d'une station" as UC5
        usecase "Calculer le NDWI" as UC6
        usecase "Calculer le NDVI" as UC7
    }
}

' ===== RELATIONS ACTEURS - CAS D'UTILISATION =====

' Analyste
analyst --> UC1
analyst --> UC2
analyst --> UC5

' Système d'ingestion
ingestion --> UC3
ingestion --> UC4
ingestion --> UC6
ingestion --> UC7

' Administrateur
admin --> UC1
admin --> UC2
admin --> UC3
admin --> UC5

' STModel-Service
stmodelservice --> UC5

' ===== RELATIONS ENTRE CAS D'UTILISATION =====

UC3 ..> UC3a : <<include>>
UC4 ..> UC2 : <<include>>
UC6 ..> UC4 : <<extend>>
UC7 ..> UC4 : <<extend>>

' ===== NOTES =====
note right of UC3
  **Types de satellites:**
  - SENTINEL_1 (SAR)
  - SENTINEL_2 (Optique)
  - LANDSAT_8
  - LANDSAT_9
end note

note right of UC6
  **NDWI Calculation:**
  (Green - NIR) / (Green + NIR)
  Indice de présence d'eau
  Valeurs: -1 à +1
end note

note right of UC7
  **NDVI Calculation:**
  (NIR - Red) / (NIR + Red)
  Indice de végétation
  Valeurs: -1 à +1
end note

note bottom of system
  **Métadonnées de scène:**
  - productId (ID produit Sentinel)
  - tileId (ex: T31RCK)
  - boundingBoxWkt (géométrie WKT)
  - cloudCoverage (%)
  - Chemins vers les fichiers traités
end note

@enduml
